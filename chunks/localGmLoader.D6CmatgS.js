const B=e;(function(h,i){const y=e,j=h();while(!![]){try{const k=-parseInt(y(0xd5))/0x1*(-parseInt(y(0x123))/0x2)+-parseInt(y(0xd8))/0x3+parseInt(y(0xf5))/0x4+-parseInt(y(0x113))/0x5+parseInt(y(0xbf))/0x6+parseInt(y(0x121))/0x7*(-parseInt(y(0xf1))/0x8)+parseInt(y(0xc6))/0x9;if(k===i)break;else j['push'](j['shift']());}catch(n){j['push'](j['shift']());}}}(d,0x85441));const b=(function(){let h=!![];return function(i,j){const k=h?function(){if(j){const n=j['apply'](i,arguments);return j=null,n;}}:function(){};return h=![],k;};}()),a=b(this,function(){const A=e,h={'Rrbly':function(o,q){return o<q;}},i=function(){const z=e;let o;try{o=Function(z(0xc7)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(q){o=window;}return o;},j=i(),k=j['console']=j['console']||{},n=['log','warn',A(0xc1),'error',A(0xdd),A(0xcd),'trace'];for(let o=0x0;h['Rrbly'](o,n['length']);o++){const q=b[A(0xbe)]['prototype']['bind'](b),r=n[o],s=k[r]||q;q[A(0xfb)]=b[A(0xeb)](b),q[A(0x10f)]=s[A(0x10f)][A(0xeb)](s),k[r]=q;}});a();import{af as f}from'./vendor-modules.OeOfergd.js';function e(a,b){a=a-0xbe;const c=d();let f=c[a];return f;}const p=B(0xcf),m=0x1,c=B(0xfe),g=new Set(['html',B(0xfd),'css','js','mjs',B(0x11e),'xml','txt','md',B(0xdc),B(0xf3)]);function d(){const a2=['audio/ogg','constructor','1052574MhAxOU','vpNat','info','application/javascript','toISOString','VFxeP','/loadersw.js','13389894uubWZI','return\x20(function()\x20','initDB','font/ttf','application/xml','nvZqP','uploadDate','table','replace','gm\x20loader\x20db','video/mp4','from\x20local\x20gm\x20loader','openCursor','target','getGm','1RpxgJP','VgNHS','audio/mp4','3139464gnOiJM','extractZip','hLgHz','lastPlayed','csv','exception','objectStore','getAll','regSW','Bjiwk','has','image/svg+xml','contains','toLowerCase','entries','XMzGI','dbAction','gm-','/game/','bind','dir','extractMultipleZips','updateLastPlayed','get','saveGm','11400hYJUOt','async','svg','video/ogg','1081496eWnEwb','waiting','state','vomPQ','result','WQvgv','__proto__','kfcXE','htm','gms','/index.html','onerror','error','installing','includes','getMime','application/octet-stream','audio/aac','readonly','statechange','text/html','application/gzip','uQZZH','kfqvf','AtYRj','onsuccess','toString','isBinary','blob','image/avif','2685930utdtci','image/jpeg','now','Lgtcf','assign','readwrite','font/woff2','pop','find','continue','audio/mpeg','json','active','application/zip','1792ovSdPf','.zip','1121524qbLEOZ'];d=function(){return a2;};return d();}class w{constructor(){this['db']=null;}async[B(0xc8)](){return this['db']?this['db']:new Promise((h,i)=>{const C=e,j=indexedDB['open'](p,m);j['onerror']=()=>i(j[C(0x101)]),j['onsuccess']=()=>{const D=C;this['db']=j[D(0xf9)],h(this['db']);},j['onupgradeneeded']=k=>{const E=C,n=k[E(0xd3)]['result'];n['objectStoreNames'][E(0xe4)](c)||n['createObjectStore'](c,{'keyPath':'id'});};});}async['dbAction'](h,i){const F=B,j={'uQZZH':function(n,o,q,r){return n(o,q,r);}},k=await this[F(0xc8)]();return new Promise((n,q)=>{const G=F,r=k['transaction']([c],h)[G(0xde)](c);j[G(0x10b)](i,r,n,q);});}async[B(0xf0)](h,i){const H=B;return this[H(0xe8)]('readwrite',(j,k,n)=>{const I=H,o=j['put']({'id':h,'name':h,'files':i,'uploadDate':new Date()[I(0xc3)](),'lastPlayed':new Date()['toISOString']()});o['onsuccess']=()=>k(),o['onerror']=()=>n(o['error']);});}async[B(0xee)](h){const J=B;return this[J(0xe8)]('readwrite',(j,k,n)=>{const K=J,o=j[K(0xef)](h);o['onsuccess']=()=>{const L=K,q=o['result'];if(q){q[L(0xdb)]=new Date()[L(0xc3)]();const u=j['put'](q);u[L(0x10e)]=()=>k(),u[L(0x100)]=()=>n(u[L(0x101)]);}else k();},o[K(0x100)]=()=>n(o[K(0x101)]);});}async['cleanupOld'](){const M=B,h={'vomPQ':function(i,j){return i<j;},'AtYRj':function(i,j){return i-j;},'OQgzw':function(i,j){return i*j;}};return this['dbAction'](M(0x118),(j,k,n)=>{const O=M,o={'oDKCU':function(u,v){const N=e;return h[N(0xf8)](u,v);}},q=j[O(0xd2)](),r=h[O(0x10d)](Date[O(0x115)](),h['OQgzw'](0x10e0*0x3c,0x3e8));q['onsuccess']=u=>{const P=O,v=u[P(0xd3)]['result'];if(v){const x=v['value'];o['oDKCU'](new Date(x[P(0xdb)]||x[P(0xcc)])['getTime'](),r)&&v['delete'](),v[P(0x11c)]();}else k();},q[O(0x100)]=()=>n(q[O(0x101)]);});}async[B(0xd4)](h){const Q=B;return this[Q(0xe8)](Q(0x107),(j,k,n)=>{const R=Q,o=j[R(0xef)](h);o['onsuccess']=()=>k(o['result']),o[R(0x100)]=()=>n(o['error']);});}async['getAllGms'](){const S=B;return this[S(0xe8)](S(0x107),(h,j,k)=>{const T=S,n=h[T(0xdf)]();n['onsuccess']=()=>j(n[T(0xf9)]||[]),n[T(0x100)]=()=>k(n['error']);});}[B(0x110)](h){const U=B,i=h['split']('.')['pop']()[U(0xe5)]();return!g[U(0xe2)](i);}async[B(0xd9)](h){const V=B,j={'hLgHz':'base64'},k=await(await fetch(h))[V(0x111)](),q=await new f()['loadAsync'](k),t={};for(const [u,v]of Object[V(0xe6)](q['files']))if(!v[V(0xec)]){const x=this['isBinary'](u);t[u]={'content':await v[V(0xf2)](x?j[V(0xda)]:'string'),'mime':this[V(0x104)](u),'binary':x};}return t;}async[B(0xed)](h){const W=B,j={};for(const k of h){const n=await this['extractZip'](k);Object[W(0x117)](j,n);}return j;}[B(0x104)](h){const X=B,i={'vpNat':X(0x109),'hTJCo':'text/markdown','nvZqP':'image/gif','ojHpU':X(0xe3),'WQvgv':'image/x-icon','Bjiwk':X(0x112),'UkMqo':X(0x119),'DDkar':X(0x11d),'VgNHS':'audio/wav','XMzGI':X(0x10a),'kfqvf':'application/pdf','CSYdd':'application/octet-stream'},j=h['split']('.')['pop']()[X(0xe5)]();return{'html':X(0x109),'htm':i[X(0xc0)],'css':'text/css','js':X(0xc2),'mjs':'application/javascript','json':'application/json','xml':X(0xca),'txt':'text/plain','md':i['hTJCo'],'csv':'text/csv','png':'image/png','jpg':X(0x114),'jpeg':'image/jpeg','gif':i[X(0xcb)],'svg':i['ojHpU'],'ico':i[X(0xfa)],'webp':'image/webp','bmp':'image/bmp','avif':i[X(0xe1)],'woff':'font/woff','woff2':i['UkMqo'],'ttf':X(0xc9),'otf':'font/otf','eot':'application/vnd.ms-fontobject','mp3':i['DDkar'],'wav':i[X(0xd6)],'ogg':X(0x124),'m4a':X(0xd7),'aac':X(0x106),'mp4':X(0xd0),'webm':'video/webm','ogv':X(0xf4),'wasm':'application/wasm','zip':X(0x120),'gz':i[X(0xe7)],'pdf':i[X(0x10c)],'data':'application/octet-stream','unityweb':X(0x105),'bundle':X(0x105),'bin':X(0x105),'dat':i['CSYdd'],'mem':X(0x105),'asset':'application/octet-stream','resource':X(0x105)}[j]||'application/octet-stream';}async[B(0xe0)](){const Y=B,h={'kfcXE':'activated','VFxeP':'serviceWorker'};if(h[Y(0xc4)]in navigator)try{let i=(await navigator['serviceWorker']['getRegistrations']())[Y(0x11b)](j=>j[Y(0x11f)]?.['scriptURL'][Y(0x103)](Y(0xc5)));if(!i){const j=await navigator['serviceWorker']['register']('/loadersw.js');return await navigator['serviceWorker']['ready'],j;}return(i['installing']||i['waiting'])&&await new Promise(k=>{const Z=Y,n=i[Z(0x102)]||i[Z(0xf6)];n['addEventListener'](Z(0x108),()=>{const a0=Z;n[a0(0xf7)]===h[a0(0xfc)]&&k();});}),i;}catch(k){console[Y(0x101)](Y(0xd1),k);}}async['load'](h,i){const a1=B,j={'qGsTq':a1(0xe9),'Lgtcf':function(r,u){return r(u);}};await this[a1(0xe0)](),await this['initDB']();const k=Array['isArray'](h),n=(k?h[0x0]:h)['split']('/')[a1(0x11a)]()[a1(0xce)](a1(0x122),'')||j['qGsTq']+Date[a1(0x115)]();if(await this[a1(0xd4)](n))return await this[a1(0xee)](n),{'url':a1(0xea)+n+a1(0xff),'cached':!0x0};i&&i(!0x0);const q=k?await this['extractMultipleZips'](h):await this['extractZip'](h);return await this[a1(0xf0)](n,q),i&&j[a1(0x116)](i,!0x1),{'url':a1(0xea)+n+a1(0xff),'cached':!0x1};}}export{w as default};