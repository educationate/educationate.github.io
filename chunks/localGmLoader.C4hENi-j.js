const A=e;(function(h,i){const y=e,j=h();while(!![]){try{const k=parseInt(y(0x17a))/0x1*(parseInt(y(0x188))/0x2)+-parseInt(y(0x183))/0x3*(parseInt(y(0x190))/0x4)+-parseInt(y(0x189))/0x5+-parseInt(y(0x18a))/0x6+-parseInt(y(0x1bb))/0x7*(parseInt(y(0x1d2))/0x8)+-parseInt(y(0x1a9))/0x9*(parseInt(y(0x193))/0xa)+parseInt(y(0x1af))/0xb;if(k===i)break;else j['push'](j['shift']());}catch(n){j['push'](j['shift']());}}}(d,0x55cbf));const b=(function(){let h=!![];return function(i,j){const k=h?function(){if(j){const n=j['apply'](i,arguments);return j=null,n;}}:function(){};return h=![],k;};}()),a=b(this,function(){const z=e,h={'XxMFh':function(n,o){return n+o;},'ySmlu':'{}.constructor(\x22return\x20this\x22)(\x20)','zfMys':'error','kbOoE':function(n,o){return n<o;}};let i;try{const n=Function(h['XxMFh'](z(0x196)+h['ySmlu'],');'));i=n();}catch(o){i=window;}const j=i['console']=i['console']||{},k=['log','warn','info',h[z(0x1ce)],'exception',z(0x179),z(0x19c)];for(let q=0x0;h[z(0x195)](q,k['length']);q++){const r=b['constructor']['prototype'][z(0x18c)](b),s=k[q],t=j[s]||r;r[z(0x197)]=b['bind'](b),r[z(0x171)]=t['toString'][z(0x18c)](t),j[s]=r;}});function d(){const a0=['436370UQuRVD','LsvJf','kbOoE','return\x20(function()\x20','__proto__','xml','video/ogg','hlQhU','active','trace','regSW','dbAction','rFaYK','delete','updateLastPlayed','PXcMP','transaction','target','text/css','waiting','getMime','gIWoG','108sfWunK','video/mp4','XCngB','contains','gm-','/loadersw.js','17140057ofNLTI','toISOString','error','readwrite','gms','mjs','pUQng','image/x-icon','isBinary','readonly','json','onsuccess','35msZIAZ','onerror','text/markdown','XoOJm','result','csv','font/ttf','lastPlayed','installing','controller','audio/aac','video/webm','text/csv','value','eOQNt','dkGes','dir','pop','image/jpeg','zfMys','toLowerCase','extractMultipleZips','application/wasm','239912lzdLUZ','uploadDate','TEyzH','serviceWorker','image/avif','addEventListener','loadAsync','WnZKb','application/json','MNcQj','assign','toString','application/vnd.ms-fontobject','state','now','image/png','MsAsA','split','audio/ogg','table','70991cGbOCX','cleanupOld','FnepX','getAll','/game/','initDB','load','SIQCw','isArray','444048Zhephz','text/html','image/webp','css','extractZip','8tSBgWo','1072900FvHneJ','1839162tSuJfV','put','bind','application/octet-stream','font/woff2','image/svg+xml','8uCkWSC','SKIP_WAITING','none'];d=function(){return a0;};return d();}a();import{ag as f}from'./vendor-modules.DGe1DaoG.js';const p='gm\x20loader\x20db',g=0x1,c=A(0x1b3),m=new Set(['html','htm',A(0x186),'js',A(0x1b4),A(0x1b9),A(0x198),'txt','md',A(0x1c0),'svg']);class w{constructor(){this['db']=null;}async[A(0x17f)](){const h={'URgrl':function(i,j){return i(j);}};return this['db']?this['db']:new Promise((j,k)=>{const B=e,n=indexedDB['open'](p,g);n[B(0x1bc)]=()=>k(n['error']),n['onsuccess']=()=>{this['db']=n['result'],h['URgrl'](j,this['db']);},n['onupgradeneeded']=o=>{const C=B,q=o[C(0x1a4)]['result'];q['objectStoreNames'][C(0x1ac)](c)||q['createObjectStore'](c,{'keyPath':'id'});};});}async['dbAction'](h,j){const k={'lVjFw':function(o,q,r,s){return o(q,r,s);}},n=await this['initDB']();return new Promise((q,r)=>{const D=e,u=n[D(0x1a3)]([c],h)['objectStore'](c);k['lVjFw'](j,u,q,r);});}async['saveGm'](h,j){const E=A,k={'PXcMP':E(0x1b2)};return this['dbAction'](k[E(0x1a2)],(n,o,q)=>{const F=E,u=n['put']({'id':h,'name':h,'files':j,'uploadDate':new Date()['toISOString'](),'lastPlayed':new Date()[F(0x1b0)]()});u['onsuccess']=()=>o(),u['onerror']=()=>q(u[F(0x1b1)]);});}async[A(0x1a1)](h){const G=A;return this[G(0x19e)](G(0x1b2),(j,k,n)=>{const H=G,o={'kVRuO':function(r){return r();}},q=j['get'](h);q[H(0x1ba)]=()=>{const I=H,u=q['result'];if(u){u[I(0x1c2)]=new Date()['toISOString']();const v=j[I(0x18b)](u);v['onsuccess']=()=>k(),v['onerror']=()=>n(v['error']);}else o['kVRuO'](k);},q['onerror']=()=>n(q[H(0x1b1)]);});}async[A(0x17b)](){const J=A,h={'XoOJm':function(i,j){return i<j;},'hlQhU':function(i){return i();},'WMDFU':function(i,j){return i-j;},'MNcQj':function(i,j){return i*j;}};return this[J(0x19e)]('readwrite',(j,k,n)=>{const K=J,o=j['openCursor'](),q=h['WMDFU'](Date[K(0x174)](),h[K(0x16f)](0x10e0*0x3c,0x3e8));o['onsuccess']=u=>{const L=K,v=u[L(0x1a4)][L(0x1bf)];if(v){const x=v[L(0x1c8)];h[L(0x1be)](new Date(x['lastPlayed']||x[L(0x1d3)])['getTime'](),q)&&v[L(0x1a0)](),v['continue']();}else h[L(0x19a)](k);},o[K(0x1bc)]=()=>n(o['error']);});}async['getGm'](h){const M=A,j={'SIQCw':'readonly'};return this[M(0x19e)](j[M(0x181)],(k,n,o)=>{const N=M,q=k['get'](h);q[N(0x1ba)]=()=>n(q['result']),q[N(0x1bc)]=()=>o(q[N(0x1b1)]);});}async['getAllGms'](){const O=A;return this['dbAction'](O(0x1b8),(h,j,k)=>{const P=O,n=h[P(0x17d)]();n['onsuccess']=()=>j(n['result']||[]),n['onerror']=()=>k(n['error']);});}[A(0x1b7)](h){const Q=A,j=h['split']('.')[Q(0x1cc)]()['toLowerCase']();return!m['has'](j);}async[A(0x187)](h){const R=A,j=await(await fetch(h))['blob'](),k=await new f()[R(0x16c)](j),q={};for(const [t,u]of Object['entries'](k['files']))if(!u[R(0x1cb)]){const v=this[R(0x1b7)](t);q[t]={'content':await u['async'](v?'base64':'string'),'mime':this['getMime'](t),'binary':v};}return q;}async[A(0x1d0)](h){const S=A,j={};for(const k of h){const n=await this[S(0x187)](k);Object[S(0x170)](j,n);}return j;}[A(0x1a7)](h){const T=A,j={'MsAsA':'application/javascript','WnZKb':T(0x16e),'jkbIm':'application/xml','gIWoG':T(0x175),'XCngB':'image/gif','pUQng':'font/woff','rFaYK':T(0x1c1),'dkGes':T(0x172),'ERCbE':T(0x178),'eOQNt':T(0x1aa),'SmYUW':'application/octet-stream'},k=h['split']('.')['pop']()[T(0x1cf)]();return{'html':T(0x184),'htm':'text/html','css':T(0x1a5),'js':'application/javascript','mjs':j[T(0x176)],'json':j[T(0x16d)],'xml':j['jkbIm'],'txt':'text/plain','md':T(0x1bd),'csv':T(0x1c7),'png':j[T(0x1a8)],'jpg':T(0x1cd),'jpeg':T(0x1cd),'gif':j[T(0x1ab)],'svg':T(0x18f),'ico':T(0x1b6),'webp':T(0x185),'bmp':'image/bmp','avif':T(0x1d6),'woff':j[T(0x1b5)],'woff2':T(0x18e),'ttf':j[T(0x19f)],'otf':'font/otf','eot':j[T(0x1ca)],'mp3':'audio/mpeg','wav':'audio/wav','ogg':j['ERCbE'],'m4a':'audio/mp4','aac':T(0x1c5),'mp4':j[T(0x1c9)],'webm':T(0x1c6),'ogv':T(0x199),'wasm':T(0x1d1),'zip':'application/zip','gz':'application/gzip','pdf':'application/pdf','data':T(0x18d),'unityweb':T(0x18d),'bundle':'application/octet-stream','bin':'application/octet-stream','dat':T(0x18d),'mem':j['SmYUW'],'asset':T(0x18d),'resource':T(0x18d)}[k]||'application/octet-stream';}async['regSW'](){const U=A,h={'FnepX':'statechange','bRMqs':function(j,k){return j in k;},'TEyzH':U(0x192),'wBKHK':U(0x191)};if(h['bRMqs'](U(0x1d5),navigator))try{let j=(await navigator['serviceWorker']['getRegistrations']())['find'](k=>k['active']?.['scriptURL']['includes']('/loadersw.js'));if(!j){const k=await navigator[U(0x1d5)]['register'](U(0x1ae),{'scope':'/','updateViaCache':h[U(0x1d4)]});return await navigator[U(0x1d5)]['ready'],navigator[U(0x1d5)][U(0x1c4)]||await new Promise(n=>{const V=U;navigator[V(0x1d5)][V(0x1d7)]('controllerchange',n,{'once':!0x0});}),k;}if((j[U(0x1c3)]||j['waiting'])&&await new Promise(n=>{const W=U,o=j[W(0x1c3)]||j[W(0x1a6)];o[W(0x1d7)](h[W(0x17c)],()=>{const X=W;o[X(0x173)]==='activated'&&n();});}),!navigator[U(0x1d5)]['controller']){const n=(await navigator['serviceWorker']['ready'])[U(0x19b)];n&&(n['postMessage']({'type':h['wBKHK']}),await new Promise(o=>{const Y=U;navigator['serviceWorker'][Y(0x1d7)]('controllerchange',o,{'once':!0x0});}));}return j;}catch(o){console[U(0x1b1)]('from\x20local\x20gm\x20loader',o);}}async[A(0x180)](h,j){const Z=A,k={'LsvJf':function(u,v){return u(v);}};await this[Z(0x19d)](),await this['initDB']();const n=Array[Z(0x182)](h),q=(n?h[0x0]:h)[Z(0x177)]('/')['pop']()['replace']('.zip','')||Z(0x1ad)+Date[Z(0x174)]();if(await this['getGm'](q))return await this[Z(0x1a1)](q),{'url':Z(0x17e)+q+'/index.html','cached':!0x0};j&&k[Z(0x194)](j,!0x0);const r=n?await this[Z(0x1d0)](h):await this['extractZip'](h);return await this['saveGm'](q,r),j&&j(!0x1),{'url':'/game/'+q+'/index.html','cached':!0x1};}}function e(a,b){a=a-0x16c;const c=d();let f=c[a];return f;}export{w as default};